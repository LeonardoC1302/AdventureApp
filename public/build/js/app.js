let step=1;const start=1,end=3,reservation={name:"",date:"",time:"",activities:[]};function startApp(){showSection(),tabs(),pagination(),next(),prev(),checkAPI(),clientName(),addDate(),addTime()}function showSection(){const e=document.querySelector(".show");e&&e.classList.remove("show");const t="#step"+step;document.querySelector(t).classList.add("show");const n=document.querySelector(".active");n&&n.classList.remove("active");document.querySelector(`[data-step="${step}"]`).classList.add("active")}function tabs(){document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",e=>{step=parseInt(e.target.dataset.step),showSection(),pagination()})})}function pagination(){const e=document.querySelector("#prev"),t=document.querySelector("#next");1===step?(t.classList.remove("hide"),e.classList.add("hide")):3===step?(e.classList.remove("hide"),t.classList.add("hide")):(e.classList.remove("hide"),t.classList.remove("hide")),showSection()}function next(){document.querySelector("#next").addEventListener("click",()=>{step>=3||(step++,pagination())})}function prev(){document.querySelector("#prev").addEventListener("click",()=>{step<=1||(step--,pagination())})}async function checkAPI(){try{const e="http://localhost:3000/api/reservations",t=await fetch(e);showActivities(await t.json())}catch(e){console.log(e)}}function showActivities(e){e.forEach(e=>{const{id:t,name:n,description:i,price:s}=e,c=document.createElement("P");c.classList.add("activity-name"),c.textContent=n;const a=document.createElement("P");a.classList.add("activity-description"),a.classList.add("hidden"),a.textContent=i;const o=document.createElement("P");o.classList.add("activity-price"),o.textContent="$"+s;const d=document.createElement("DIV");d.classList.add("activity"),d.dataset.idActivity=t,d.onclick=function(){selectActivity(e)},d.appendChild(c),d.appendChild(a),d.appendChild(o),document.querySelector("#activities").appendChild(d)})}function selectActivity(e){const{id:t}=e,{activities:n}=reservation,i=document.querySelector(`[data-id-activity="${t}"]`);n.some(e=>e.id===t)?(reservation.activities=n.filter(e=>e.id!==t),i.classList.remove("selected")):(reservation.activities=[...n,e],i.classList.add("selected")),console.log(reservation)}function clientName(){reservation.name=document.querySelector("#name").value}function addDate(){const e=document.querySelector("#date");e.addEventListener("input",t=>{const n=new Date(t.target.value).getUTCDay();[0].includes(n)?(e.value="",showAlert("We are not open on Sundays","error")):reservation.date=t.target.value})}function addTime(){const e=document.querySelector("#time");e.addEventListener("input",t=>{const n=t.target.value,i=n.split(":")[0];i<8||i>18?(e.value="",showAlert("We are not open at this time","error")):reservation.time=n})}function showAlert(e,t){if(document.querySelector(".alert"))return;const n=document.createElement("DIV");n.textContent=e,n.classList.add("alert"),n.classList.add(t);document.querySelector(".form").appendChild(n),setTimeout(()=>{n.remove()},3e3)}document.addEventListener("DOMContentLoaded",()=>{startApp()});